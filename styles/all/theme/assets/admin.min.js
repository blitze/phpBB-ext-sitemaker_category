!function(e,t,i,r){"use strict";e(i).ready(function(){var r=t.ajaxUrl||"",n=t.groupId||0,o=t.lang||{},a=t.Twig||{},l={},u={},p={},d="";a.extendFunction("lang",function(e){return void 0!==o[e]?o[e]:e}),e(i).ajaxSend(function(e,t,i){i.url+=i.url.indexOf("?")>=0?"&":"?",i.url+="group="+n}),e(".items-list").iconPicker({selector:".icon-select",onSelect:function(e,t){var i=e.parentsUntil("li").parent().attr("id").substring(5);u.treeBuilder("updateItem",{cat_icon:t},i)}});var s=e("#sm-groups").on("click",".group-option",function(t){n=+e(this).parent().attr("id").substring(6),e(this).parent().parent().children().removeClass("row3 current-group"),e(this).parent().addClass("row3 current-group"),u.treeBuilder("getItems"),t.preventDefault()}).on("click",".group-edit",function(t){var i=e(this).parent().prev().removeClass("group-option").parent().removeClass("current-group").find(".group-editable");d=i.text(),c.show().appendTo(i.text("")).children(":input").val(d).focus().select().end(),t.preventDefault()}).on("click",".group-delete",function(e){p.dialog({buttons:l}).dialog("open"),e.preventDefault()}),c=e('<form id="inline-group-form"><input type="text" id="inline-group-edit" value="" /></form>').hide().appendTo(e("body"));u=e("#nested-tree").treeBuilder({ajaxUrl:r,editForm:"#edit-group-item-form",dialogConfirm:"#dialog-confirm-group-item",fields:{itemId:"cat_id",itemTitle:"cat_name"}}),e(".toggle-view").click(function(t){e(e(this).attr("href")).slideToggle(),t.preventDefault()}),e("#add-group").button().click(function(t){n=0,e.getJSON(r+"add_group",function(e){if(null!==e.id){var t='<li id="group-'+(n=e.id)+'" class="row3 current-group">';t+='<a href="#" class="group-option"><span class="group-editable">'+e.title+"</span></a>",t+='<div class="group-actions">',t+='<a href="#" class="group-delete left" title="'+o.remove+'"><span class="ui-icon ui-icon-trash"></span></a>',t+="</span></li>",s.children("li").removeClass("row3 current-group"),s.append(t),u.show().treeBuilder("getItems")}}),t.preventDefault()}),e("#inline-group-form").submit(function(t){t.preventDefault(),e(this).children("#inline-group-edit").trigger("blur")}),e("#inline-group-edit").focusout(function(t){var i=e(this).val(),o=e(this).val("").parent().parent();n&&i&&i!==d?e.post(r+"edit_group",{title:i},function(e){e.name&&o.text(e.name)}):i=d,c.hide().appendTo(e("body")),o.text(i).parent().addClass("group-option").parent().addClass("current-group"),t.preventDefault()}),l[o.remove]=function(){n&&e.getJSON(r+"delete_group",function(i){if(i.id===n){var r=e("#group-"+n),o=r.prev(),a=r.next();o.length?o.find(".group-option").trigger("click"):a.length?a.find(".group-option").trigger("click"):t.location.reload(!1),r.remove()}}),e(this).dialog("close")},l[o.cancel]=function(){e(this).dialog("close")},p=e("#dialog-confirm-group").dialog({autoOpen:!1,modal:!0,width:"auto",show:"slide",hide:"slide"}),n&&u.show()})}(jQuery,window,document);
//# sourceMappingURL=admin.min.js.map
