!function(d,s,c,e){"use strict";d(c).ready(function(){var r=s.ajaxUrl||"",n=s.groupId||0,i=s.lang||{},e=s.Twig||{},t={},o={},a={},l="";e.extendFunction("lang",function(e){return void 0!==i[e]?i[e]:e}),d(c).ajaxSend(function(e,t,i){i.url+=0<=i.url.indexOf("?")?"&":"?",i.url+="group="+n}),d(".items-list").iconPicker({selector:".icon-select",onSelect:function(e,t){var i=e.parentsUntil("li").parent().attr("id").substring(5);o.treeBuilder("updateItem",{cat_icon:t},i)}});var u=d("#sm-groups").on("click",".group-option",function(e){n=+d(this).parent().attr("id").substring(6),d(this).parent().parent().children().removeClass("row3 current-group"),d(this).parent().addClass("row3 current-group"),o.treeBuilder("getItems"),e.preventDefault()}).on("click",".group-edit",function(e){var t=d(this).parent().prev().removeClass("group-option").parent().removeClass("current-group").find(".group-editable");l=t.text(),p.show().appendTo(t.text("")).children(":input").val(l).focus().select().end(),e.preventDefault()}).on("click",".group-delete",function(e){a.dialog({buttons:t}).dialog("open"),e.preventDefault()}),p=d('<form id="inline-group-form"><input type="text" id="inline-group-edit" value="" /></form>').hide().appendTo(d("body"));o=d("#nested-tree").treeBuilder({ajaxUrl:r,editForm:"#edit-group-item-form",dialogConfirm:"#dialog-confirm-group-item",fields:{itemId:"cat_id",itemTitle:"cat_name"}}),d(".toggle-view").click(function(e){d(d(this).attr("href")).slideToggle(),e.preventDefault()}),d("#add-group").button().click(function(e){n=0,d.getJSON(r+"add_group",function(e){if(null!==e.id){var t='<li id="group-'+(n=e.id)+'" class="row3 current-group">';t+='<a href="#" class="group-option"><span class="group-editable">'+e.title+"</span></a>",t+='<div class="group-actions">',t+='<a href="#" class="group-delete left" title="'+i.remove+'"><span class="ui-icon ui-icon-trash"></span></a>',t+="</span></li>",u.children("li").removeClass("row3 current-group"),u.append(t),o.show().treeBuilder("getItems")}}),e.preventDefault()}),d("#inline-group-form").submit(function(e){e.preventDefault(),d(this).children("#inline-group-edit").trigger("blur")}),d("#inline-group-edit").focusout(function(e){var t=d(this).val(),i=d(this).val("").parent().parent();n&&t&&t!==l?d.post(r+"edit_group",{title:t},function(e){e.name&&i.text(e.name)}):t=l,p.hide().appendTo(d("body")),i.text(t).parent().addClass("group-option").parent().addClass("current-group"),e.preventDefault()}),t[i.remove]=function(){n&&d.getJSON(r+"delete_group",function(e){if(e.id===n){var t=d("#group-"+n),i=t.prev(),r=t.next();i.length?i.find(".group-option").trigger("click"):r.length?r.find(".group-option").trigger("click"):s.location.reload(!1),t.remove()}}),d(this).dialog("close")},t[i.cancel]=function(){d(this).dialog("close")},a=d("#dialog-confirm-group").dialog({autoOpen:!1,modal:!0,width:"auto",show:"slide",hide:"slide"}),n&&o.show()})}(jQuery,window,document);
//# sourceMappingURL=admin.min.js.map
